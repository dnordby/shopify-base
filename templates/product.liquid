<div class="product-wrapper" itemscope itemtype="http://schema.org/Product">
  <meta itemprop="url" content="{{ shop.url }}{{ product.url }}" />
  <meta itemprop="image" content="{{ product | img_url: 'grande' }}" />
  <form action="/cart/add" method="post" enctype="multipart/form-data" class="product-form">

    <div class="product-photos">
      {% if product.images.size == 0 %}
        <div class="product-photo-container">
          <img src="{{ '' | img_url: 'grande' }}" alt="" />
        </div>
      {% else %}
        {% assign featured_image = product.selected_or_first_available_variant.featured_image | default: product.featured_image %}
        <div class="product-photo-container">
          <img src="{{ featured_image | img_url: '300x' }}" alt="{{ product.title | escape }}" />
        </div>
        {% if product.images.size > 1 %}
          <ul class="product-photo-thumbs">
            {% for image in product.images %}
            <li class="product-photo-thumb">
              <img src="{{ image | img_url: '300x' }}" alt="{{ image.alt | escape }}" />
            </li>
            {% endfor %}
          </ul>
        {% endif %}
      {% endif %}
    </div>

    <div class="product-details">
      <h1 itemprop="name">{{ product.title }}</h1>

      <div id="product-description" itemprop="description">
        {{ product.description }}
      </div>

      <div id="shopify-product-reviews" data-id="{{ product.id }}">{{ product.metafields.spr.reviews }}</div>

      <div id="product-price" itemprop="offers" itemscope itemtype="http://schema.org/Offer">
        <meta itemprop="priceCurrency" content="{{ shop.currency }}" />
        {% if product.available %}
          <link itemprop="availability" href="http://schema.org/InStock" />
        {% else %}
          <link itemprop="availability" href="http://schema.org/OutOfStock" />
        {% endif %}
        <p>
          {% assign variant = product.selected_or_first_available_variant %}
          {% if product.compare_at_price > product.price %}
            <span class="product-price on-sale" itemprop="price">{{ variant.price | money }}</span>
            <s class="product-compare-price">{{ variant.compare_at_price | money }}</s>
          {% else %}
            <span class="product-price" itemprop="price">{{ variant.price | money }}</span>
          {% endif %}
        </p>
      </div>

      {% assign hide_default_title = false %}
      {% if product.variants.size == 1 and product.variants.first.title contains 'Default' %}
        {% assign hide_default_title = true %}
      {% endif %}

      {% section 'color-manager' %}

      {% comment %} LOOPING THROUGH VARIANTS {% endcomment %}
      <div id="product-variants" class="{% if hide_default_title %} hidden{% endif %}">
        <select id="product-select" name="id">
          {% for variant in product.variants %}
            <option{% if variant == product.selected_or_first_available_variant %} selected{% endif %} value="{{ variant.id }}">
              {{ variant.title }} - {{ variant.price | money }}
            </option>
          {% endfor %}
        </select>
      </div>
    </div>

    <div class="quantity-wrapper">
      <label for="Quantity">Quantity</label>
      <input type="number" id="Quantity" name="quantity" value="1" min="1" pattern="[0-9]*">
    </div>

    <div class="submit-wrapper">
      <button type="submit" name="add" id="AddToCart" {% unless current_variant.available %}disabled="disabled"{% endunless %} class="button">
        <span id="AddToCartText">
          {% unless current_variant.available %}
            Sold Out
          {% else %}
            Add To Cart
          {% endunless %}
        </span>
      </button>
    </div>
  </form>

</div>
